#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')#hide
!pip freeze > requirements.txt!pip install nbdev#hide
from nbdev import *<p><a href="https://mybinder.org/v2/gh/bniaalab/master?filepath=%2Fnotebooks%2Findex.ipynb"><img src="https://mybinder.org/badge_logo.svg" alt="Binder" /></a>
<a href="https://colab.research.google.com/github/bnia/datalab/blob/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/colab.svg" alt="Binder" /></a>
<a href="https://github.com/bnia/datalab/tree/master/notebooks/index.ipynb"><img src="https://pete88b.github.io/fastpages/assets/badges/github.svg" alt="Binder" /></a>
<a href="https://github.com/ellerbrock/open-source-badges/"><img src="https://badges.frapsoft.com/os/v3/open-source.svg?v=103" alt="Open Source Love svg3" /></a></p>
<p><a href="https://github.com/bnia/dataguidee/blob/master/LICENSE"><img src="https://img.shields.io/npm/l/all-contributors.svg?style=flat" alt="NPM License" /></a>
<a href="https://bnia.github.io"><img src="http://img.shields.io/badge/Status-Active-green.svg" alt="Active" /></a>
<a href="https://pypi.python.org/pypi/dataplay/"><img src="https://img.shields.io/pypi/pyversions/dataplay.svg" alt="Python Versions" /></a>
<a href=""><img src="https://img.shields.io/github/last-commit/bnia/dataguide.svg?style=flat" alt="GitHub last commit" /></a>
<a href="http://unmaintained.tech/"><img src="http://unmaintained.tech/badge.svg" alt="No Maintenance Intended" /></a> </p>
<p><a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/stars/bnia/dataguide.svg?style=social&amp;label=Star" alt="GitHub stars" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/watchers/bnia/dataguide.svg?style=social&amp;label=Watch" alt="GitHub watchers" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/forks/bnia/dataguide.svg?style=social&amp;label=Fork" alt="GitHub forks" /></a>
<a href="https://github.com/bnia/dataguide"><img src="https://img.shields.io/github/followers/bnia.svg?style=social&amp;label=Follow" alt="GitHub followers" /></a> </p>
<p><a href="https://twitter.com/intent/tweet?text=Check%20out%20this%20%E2%9C%A8%20colab%20by%20@bniajfi%20https://github.com/bnia/dataguide%20%F0%9F%A4%97"><img src="https://img.shields.io/twitter/url/https/github.com/bnia/dataguide.svg?style=social" alt="Tweet" /></a>
<a href="https://twitter.com/bniajfi"><img src="https://img.shields.io/twitter/follow/bniajfi.svg?style=social" alt="Twitter Follow" /></a></p>
<h2>(Non-Technical) Introduction</h2>
<p><a href="https://www.python.org/"><img src="http://ForTheBadge.com/images/badges/made-with-python.svg" alt="forthebadge made-with-python" /></a></p>
<p><a href="https://GitHub.com/Naereen/"><img src="http://ForTheBadge.com/images/badges/built-with-love.svg" alt="ForTheBadge built-with-love" /></a> <a href="https://github.com/Naereen/StrapDown.js/blob/master/LICENSE"><img src="https://img.shields.io/github/license/Naereen/StrapDown.js.svg" alt="GitHub license" /></a></p>
<p><a href="http://ForTheBadge.com"><img src="http://ForTheBadge.com/images/badges/powered-by-electricity.svg" alt="ForTheBadge powered-by-electricity" /></a></p>
<p>Fastai, the organization that created this tool, helps empower others by lowering the barrier of entry when breaking into software (AI) development. </p>
<p>In their own words:</p>
<blockquote>
<p>Nbdev is a tool that allows you to fully develop a library in Jupyter Notebooks, putting all your code, tests, and documentation in one place. -<a href="http://nbdev.fast.ai/">Nbdev</a></p>
</blockquote>
<p>The Nbdev library and tutorial is actually written using a notebook. They can be created and published by running the notebook on itself!</p>
<p>If you check, you can see that their <a href="http://nbdev.fast.ai/">tutorial</a> is actually being hosted on <a href="https://github.com/fastai/nbdev/tree/master/docs">GitHub</a> pages.</p>
<p>Some of the tools that Fastai provides includes:</p>
<ul>
<li><a href="https://github.com/fastai/nbdev">Nbdev</a> - For software development and documentation</li>
<li><a href="https://github.com/fastai/fastpages">Fastpages</a> - Works like Nbdev but for blogging</li>
<li><a href="https://github.com/fastai/fastscript">Fastscript</a> - Converts a python function to a CLI script</li>
<li><a href="https://github.com/fastai/fastprogress">Fastprogress</a> - Reveals a progress bar for long processes</li>
<li><a href="https://github.com/fastai/fastai">FastiAi</a> - Data convenience tools and AI models</li>
<li><a href="https://course.fast.ai/">FastAi Course</a> - V3; a practical deep-learning course</li>
</ul>
<p>Are you using one of these products? Tweet @jeremyphoward and <a href="https://www.fast.ai/about/#founders">staff</a> or @HamelHusain for all their work!</p>
<h3>With Nbdev, you can:</h3>
<ol>
<li><strong>Publish notebooks as a module on PyPI.</strong></li>
</ol>
<ul>
<li>A) &quot;Flag&quot; cells to <a href="http://nbdev.fast.ai/export/">export</a> them as part of the Python library</li>
</ul>
<ol start="2">
<li><strong>Install it anywhere</strong>: <code>pip install &lt;nameOfModule&gt;</code></li>
</ol>
<ul>
<li>A) This can be used in conjunction with Fastscript to create CLI scripts</li>
<li>B) The CLI help interface is reachble by typing <code>! &lt;NameofMdule&gt; -h</code></li>
</ul>
<ol start="3">
<li><strong>Convert notebooks to documenation in HTML and Markdown.</strong> </li>
</ol>
<ul>
<li>A) Use the index.ipynb to auto-generate a homepage and a Github and PyPI README.md file.</li>
<li>C) Have the backticked function auto-link to a functioning GitHub source code.</li>
<li>D) Host the documentation on GitHub pages so they are always up to date.</li>
<li>E) &quot;Flag&quot; cells to either collapse or hide the cells or the output from documentation.</li>
<li>F) Personalize the <a href="https://jekyllrb.com/">Jekyll</a> website templates used to make the site.</li>
<li>G) Store photos in an images folder for use in your notebook and have it copied to your website.</li>
</ul>
<ol start="4">
<li><strong>Use created modules across notebooks in realtime.</strong></li>
</ol>
<ul>
<li>A) Auto-reload modules across notebooks during development if a their corresponding .py script is updated </li>
</ul>
<h3><em>While we were on-topic!</em></h3>
<p>If this is more than you need, consider the following: </p>
<ul>
<li>Sharing the Colab links directly. </li>
<li><a href="https://nbconvert.readthedocs.io/en/latest/">Nbconvert</a> notes into HTML, LaTeX, PDF, Markdown, etc.</li>
<li>Using <a href="https://mybinder.org/">mybinder</a></li>
</ul>
<blockquote>
<p>Have a repository full of Jupyter notebooks? With Binder, open those notebooks in an executable environment, making your code immediately reproducible by anyone, anywhere.</p>
</blockquote>
<h2>(Technical) Overview</h2>
<ol>
<li>
<p>Nbdev is a Python library that is executed directly from the terminal.</p>
</li>
<li>
<p>At its heart, a user simply enters a directory and executes one of the Nbdev terminal commands.</p>
</li>
<li>
<p>Python notebooks are automatically located and processed for publication and deployment.</p>
</li>
<li>
<p>Specific &quot;Flags&quot; (either the Comment or <a href="https://ipython.readthedocs.io/en/stable/interactive/magics.html#">&quot;Magic&quot;</a> variety) tell Nbdev how to treat cells.</p>
</li>
<li>
<p>Photos stored in the 'images' folder will be copied over to your publication folder.</p>
</li>
</ol>
<h3><a name="nbcmd"></a>Nbdev Terminal Commands</h3>
<p>Entering these commands into the terminal at the project's root directory will handle most of everything. </p>
<p><em>Pip and Git specific steps are not listed, but are included in sections below.</em></p>
<blockquote>
<p>Important: Information in this section is ever-changing! Quotes found here came from Nbdev's <a href="https://nbdev.fast.ai/cli/#nbdev_nb2md">official documentation</a>, from which you will derive much more insight with respect to using these functions.</p>
</blockquote>
<h4>Create</h4>
<blockquote>
<ul>
<li><code>nbdev_new</code>: creates a new Nbdev project.</li>
<li><code>nbdev_update_lib</code>: propagates any change in the library back to the notebooks.</li>
</ul>
</blockquote>
<h4>Compile</h4>
<blockquote>
<ul>
<li><code>nbdev_nb2md</code>: converts a notebook to a Markdown file.</li>
<li><code>nbdev_build_docs</code>: builds the documentation from the notebooks.</li>
<li><code>nbdev_build_lib</code>: builds the library from the notebooks.</li>
<li><code>nbdev_bump_version</code>/ <code>nbdev_bump</code>: increments version in settings.py by one.</li>
</ul>
</blockquote>
<p><em>Nbdev ignores any file that starts with an underscore. Version bumping must be performed each time prior to uploading to PyPI.</em></p>
<p>Combine commands with with regular expressions for more power.</p>
<ul>
<li>A commands like <code>nbdev_build_docs --fname=[!test]*.ipynb</code> will run all files except ones with filenames that start with 'test'</li>
</ul>
<h4>Publish</h4>
<blockquote>
<ul>
<li><code>nbdev_clean_nbs</code>: removes all superfluous metadata form the notebooks to avoid merge conflicts.</li>
<li><code>nbdev_install_git_hooks</code>: installs the git hooks that use ( <code>nbdev_fix_merge</code> and <code>nbdev_diff_nbs</code>) automatically on each commit/merge.</li>
</ul>
</blockquote>
<p><em>GitHooks must run once on project creation for them is complete so that can be set up permanently.</em></p>
<h4>Check</h4>
<blockquote>
<ul>
<li><code>nbdev_read_nbs</code>: reads all notebooks to make sure none are broken.</li>
<li><code>nbdev_trust_nbs</code>: trusts all notebooks so that the HTML content is shown.</li>
<li><code>nbdev_upgrade</code>: updates an existing Nbdev project to use the latest features.</li>
</ul>
</blockquote>
<p>nbdev_upgrade can run any time there are new updates, through it only needs to run once per update.</p>
<h3><a name="nbflags"></a> Nbdev Flags (Mark Up/Cell Magic)</h3>
<p>Nbdev scripts rely on special <a href="https://nbdev.fast.ai/tutorial/#nbdev-flags">comments <strong>or</strong> magics</a>, depending on your choice, for cell-level handling of notebooks.</p>
<p>Whereas Nbdev's terminal commands are executed at a project's root directory, content covered in this section is placed in the notebooks' cells.</p>
<p>Most Nbdev flags define design instructions for when we create the website/module (Ex. <code>default_exp</code>, <code>autoreload</code>).</p>
<p><strong>1.</strong> <strong>Basic Comment and Magics</strong></p>
<blockquote>
<p><strong>Warning</strong>: Content in this section is pulled from the Fastpages <a href="https://fastpages.fast.ai/fastpages/jupyter/2020/02/21/introducing-fastpages.html#Other-Feautures">blog</a> <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/07/24/nbdev-deep-dive.html">posts</a> and the Nbdev docs. If you have any issues, you will have to scoure these sources to resolve them!</p>
</blockquote>
<p>To gain access to <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">Nbdev's new 'magics'</a>, you my find it neccesary to execute the command <code>nbdev_upgrade</code> only once; add <code>from nbdev import *</code> to the top of a notebook in a code-cell (this <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">article</a> covers that); and put Flags at the top of a cell for it to work.</p>
<blockquote>
<p><strong>Important</strong>: The list shown below was obtained from <a href="https://pete88b.github.io/fastpages/nbdev/fastai/jupyter/2020/06/02/nbdev-magic.html">here</a>. As always, please refer to the official source for up to date information.</p>
</blockquote>
<p>| Comment flag                                | Magic flag                  |                                                                                |
|---------------------------------------------|-----------------------------|--------------------------------------------------------------------------------|
| <code>default_exp</code>                               | <code>nbdev_default_export</code>      | Define the name of the module everything should be exported in.                |
| <code>exports</code>                                   | <code>nbdev_export_and_show</code>     | Export and show code in the docs.                                              |
| <code>exporti</code>                                   | <code>nbdev_export_internal</code>     | Export but do not show in docs and or add to <code>__all__</code>.                        |
| <code>export</code>                                    | <code>nbdev_export</code>              | Export but do not show in docs.                                                |
| <code>hide_input</code>                                | <code>nbdev_hide_input</code>          | Do not show input of a test cell in docs.                                      |
| <code>hide_output</code>                               | <code>nbdev_hide_output</code>         | Do not show output of a test cell in docs.                                     |
| <code>hide</code>                                      | <code>nbdev_hide</code>                | Do not show a test cell or markdown in docs.                                   |
| <code>default_cls_lvl</code>                           | <code>nbdev_default_class_level</code> | Define the default toc level of classes.                                       |
| <code>collapse_output open</code> or <code>collapse-output</code> | <code>nbdev_collapse_output</code>     | Inlcude output in the docs under a collapsable element.                        |
| <code>collapse_input close</code> or <code>collapse-input</code>  | <code>nbdev_collapse_output</code>     | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse_show</code> or <code>collapse-show</code>          | <code>nbdev_collapse_input open</code> | Inlcude input in the docs under a collapsable element that is open by default. |
| <code>collapse_hide</code> or <code>collapse-hide</code>          | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |
| <code>collapse</code>                                  | <code>nbdev_collapse_input</code>      | Inlcude input in the docs under a collapsable element.                         |</p>
<p><strong>2</strong>: <strong>Autoreloading</strong> </p>
<p>Put <code>%load_ext autoreload</code> <code>%autoreload 2</code> in ipynbs. If you are working the notebook and importing the local version of your library, the imported modules will auto update whenever the corresponding .py file gets updated.</p>
<blockquote>
<p>Note: This opens new doors in your programming experience. </p>
<p>Provided all the notebooks have access to the same file directory:</p>
<ol>
<li>You can edit .py's and use <code>update_lib</code> to push the exported code's edits back into their original ipynbs (ran anywhere) </li>
<li>You can edit .IPYNB's and use <code>build_lib</code> to push the exported code's edits back into their .pys (ran anywhere) </li>
</ol>
<p>The autoreload feature will let you immediately test the new modules from any desired notebook.  </p>
</blockquote>
<p><strong>3. Console Scripts</strong> are made by marking up functions using the <a href="https://fastscript.fast.ai/">fastscript</a> tool and editing the settings.ini file (see this <a href="https://github.com/fastai/nbdev/blob/554e63b1b05390a3ad2bc086d8485f98b1e63ca4/settings.ini">example</a>).</p>
<p><strong>4. Anchor Links</strong></p>
<blockquote>
<p>Anchor links are web links that allow users to leapfrog to a specific point on a website page. They save them the need to scroll and skim-read, making navigation easier. - <a href="https://www.telegraph.co.uk/branded-content/marketing-guides/what-is-anchor-link/">Telegraph</a></p>
</blockquote>
<blockquote>
<p>For example,
<a name="hyperlinkingValue"></a> Both landmark and <a href="#hyperlinkingValue">hyperlink</a> have been placed on this line. Click the link for this line to zip up to the top of your screen. </p>
</blockquote>
<p>Code: </p>
<pre><code># This is the hyperlink
[hyperlinktext](#hyperlinkingValue) 

# It will take you to wherever you place this landmark
&lt;a name=&quot;hyperlinkingValue&quot;&gt;&lt;/a&gt;
</code></pre>
<p><strong>5</strong>: <strong>Jekyll Automated Document Hyperlinking</strong></p>
<p>Mentioning an exported class with backticks <code>functionName</code> will create a hyperlink to its sourcode on GitHub. This will only work if it is an exported function.</p>
<ul>
<li>
<p>Functions and Classes have are automatically documented. </p>
</li>
<li>
<p>Class methods are not shown by default, so use <a href="http://nbdev.fast.ai/showdoc/#show_doc"><code>show_doc(class.method</code>)</a> to do this.</p>
</li>
</ul>
<p><strong>6.</strong> <strong>Jekyll Metadata</strong></p>
<p>The cell <code>#default_exp</code> located at the top of a cell can also be used for
<a href="https://yaml.org/">YAML</a>, a data-serialization standard. This is used as <a href="https://assemble.io/docs/YAML-front-matter.html">Front Matter</a> that can be <a href="https://jekyllrb.com/docs/datafiles/">used with Jekyll</a> to render templates.</p>
<blockquote>
<p>In the markdown cell with the title, you can add the summary as a block quote by putting an empty block quote for an empty summary. Next, add a list with any additional metadata you would like to add <strong><a href="https://nbdev.fast.ai/export2html/#get_metadata"><code>get_metadata</code></a></strong>.</p>
</blockquote>
<p><strong>7. Jekyll Images</strong></p>
<p>The 'images' folder can be used to conjure up pictures, with an example provided below:</p>
<p><code>![](notebookfolder/images/company_logo.png)</code></p>
<p>These images will be added to and displayed in the docs.</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
<p><strong>8. Jekyll <a href="http://nbdev.fast.ai/export2html/#add_jekyll_notes">Notes</a></strong></p>
<p>The following section was written using the following markups: </p>
<p><code>&gt; Note:</code>, <code>&gt; Warning:</code>, <code>&gt; Tip:</code> and <code>&gt; Important: text goes here</code></p>
<blockquote>
<p>Note: This is a note.</p>
</blockquote>
<blockquote>
<p>Warning: This is a warning.</p>
</blockquote>
<blockquote>
<p>Tip: This is a tip.</p>
</blockquote>
<blockquote>
<p>Important: This is an Important doc link to <a href="/export2html#add_jekyll_notes"><code>add_jekyll_notes</code></a>, which should also work fine.</p>
</blockquote>
<p><strong>9. Jekyll <a href="http://nbdev.fast.ai/search/">Search</a></strong></p>
<p>This is functionality not covered here, but may be added in the future.</p>
<p><strong>10. Jekyll Custom Sidebar</strong></p>
<p>This is used for your HTML documentation, which can be configured using meta-markup <a href="https://www.json.org/json-en.html">JSON</a>.</p>
<blockquote>
<p>The default sidebar lists all html pages with their respective title, except the index that is named &quot;Overview&quot;. To build a custom sidebar, set the flag custom_sidebar in your settings.ini to True then change the sidebar.json file in the doc_folder to your liking. Otherwise, the sidebar is updated at each doc build.</p>
</blockquote>
<h2>Getting Started</h2>
<p>To get started, install the Nbdev libarary.</p>
! pip install nbdev<h3>Connect to Folder</h3>
<p>Give Colabs access to your Google Drive</p>
from google.colab import drive
drive.mount('/content/drive')<p>Navigate to the Google Drive directory where you store your projects folder.</p>
<h2>Creating a New Project</h2>
<p>The Nbdev library will only work with projects that have the proper file structure and files. </p>
<p>Once configured, you may simply write in a notebook (placing Nbdev 'FLAGS' where needed) and publish using an Nbdev terminal commands. The Nbdev command will process the notebook and each of its cells according to rules denoted by the 'FLAGS'.</p>
<h3>Getting a template</h3>
<p>You can grab a free project template containing all the needed files and proper structure. With this, you can get started in one of two methods shown below.</p>
<h4>Method 1) Grabbing a template using GitHub and the browser.</h4>
<p>Now, create a new <a href="https://github.com/fastai/nbdev_template/generate">repository</a>.</p>
! git clone https://github.com/fastai/nbdev_template.gitls#hide
!mv nbdev_template VitalSigns
!mv VitalSigns ../z!cp RBIntel.ipynb ../VitalSigns#hide
cd ../VitalSigns/content/drive/My Drive/VitalSigns
#hide
!ls00_core.ipynb	    docs	 MANIFEST.in	settings.ini
CONTRIBUTING.md     index.ipynb  RBIntel.ipynb	setup.py
docker-compose.yml  LICENSE	 README.md
<h4>Method 2) Grabbing a template using the Nbdev library and the terminal.</h4>
!git initInitialized empty Git repository in /content/drive/MyDrive/vitalSigns/.git/
<p>An Nbdev terminal command can be used to <strong>create a template</strong> project directory.</p>
<p>Use -h to view positional args.</p>
#hide
cd ../! nbdev_new -h<details > <summary>Click to toggle</summary> usage: nbdev_new
       [-h]

Create a
new nbdev
project
from the
current git
repo

optional arguments:
  -h, --help
show this
help
message and
exit
</details><p>We will need to register your <strong>GitHub credentials</strong> appropraitely configured for it to work.</p>
<details > <summary>Click to toggle</summary> #collapse_input open
! git config --global user.email "charles.karpati@gmail.com"
! git config --global user.name "bnia"</details><p>Now, you can just run the command to <strong>create a new project/directory</strong> by a name of your choosing.</p>
! nbdev_new 'test123'<p>If you enter it, you will see it comes all set up.</p>
#hide
!cd VitalSigns/bin/bash: line 0: cd: VitalSigns: No such file or directory
<p>As you can see, it comes all set up.</p>
#hide
ls<h3>Configuring the Template</h3>
<p><strong>There are some one-offs to perform on the template.</strong></p>
<h4>GitHooks</h4>
<p>Run <code>! nbdev_install_git_hooks</code> </p>
<blockquote>
<p>To set up GitHooks that will remove metadata from your notebooks when you commit, greatly reducing the chance you have a conflict. </p>
<p>But if you do get a conflict later, simply run nbdev_fix_merge filename.ipynb. This will replace any conflicts in cell outputs with your version. If there are conflicts in input cells, then both cells will be included in the merged file, along with standard conflict markers (e.g. =====). Then, you can open the notebook in Jupyter and choose which version to keep.
~ nbdev <a href="http://nbdev.fast.ai/cli/#nbdev_install_git_hooks">tutorial</a></p>
</blockquote>
# remove metadata from your notebooks when you commit reducing the chance you have a conflict.
! nbdev_install_git_hooks
# if you do get a conflict, simply run nbdev_fix_merge filename.ipynb<h4>Settings.ini</h4>
<p>Everything is included in the template for the library to be packaged.</p>
<p>Your settings.ini is where all parts of nbdev look for any required configuration information. </p>
<p>Complete the Python form below to update the <code>settings.ini</code> file.</p>
<p>Really, only the '<strong>folder_name</strong>' and '<strong>github_username</strong>' fields need to be edited for this to work.</p>
<p>The form values entered here will be inserted into the settings.ini doc. </p>
<details > <summary>Click to toggle</summary> #@title Example form fields
#@markdown Forms support many types of fields.

# Name of the project
folder_name = "VitalSigns"  #@param {type:"string"}
company_name = "BNIA-JFI" #@param {type:"string"}
# GitHub Username
github_username = 'bniajfi'  #@param {type:"string"}
description = "Python Scripts for BNIA-JFI's Vital Signs Data"  #@param {type:"string"}
keywords = "Community Data"  #@param {type:"string"}
# Who are you?
author = "Charles Karpati"  #@param {type:"string"}
author_email = 'charles.karpati@gmail.com' #@param {type:"string"}
# Where are your notebooks? They are currently at the basepath.
path_to_locate_notebooks = "."  #@param {type:"string"}
# Where should your documentation be put? {type:"string"}
path_to_place_documentation = "docs" #@param {type:"string"}
#@markdown ---

user=github_username
nbs_path=path_to_locate_notebooks
doc_path=path_to_place_documentation
lib_name=folder_name

# Now let's rewrite the settings.ini file.

innertext = """
[DEFAULT]
# All sections below are required unless otherwise specified
host = github
lib_name = """+lib_name+"""
company_name = """+company_name+"""

user = """+user+"""
description = """+description+"""
keywords = """+keywords+"""
author = """+author+"""
author_email = """+author_email+"""
copyright = MIT
branch = master
version = 0.0.1
min_python = 3.6
audience = Developers
language = English
# Set to True if you want to create a more fancy sidebar.json than the default
custom_sidebar = False
# Add licenses and see current list in `setup.py`
license = apache2
# From 1-7: Planning Pre-Alpha Alpha Beta Production Mature Inactive
status = 2

# Optional. Same format as setuptools requirements
# requirements = 
# Optional. Same format as setuptools console_scripts
# console_scripts = 
# Optional. Same format as setuptools dependency-links
# dep_links = 

###
# You probably won't need to change anything under here,
#   unless you have some special requirements
###

# Change to, e.g. "nbs", to put your notebooks in nbs dir instead of repo root
nbs_path = """+nbs_path+"""
doc_path = """+doc_path+"""

# Whether to look for library notebooks recursively in the `nbs_path` dir
recursive = False

# Anything shown as '%(...)s' is substituted with that setting automatically
doc_host =  https://%(user)s.github.io
#For Enterprise Git pages use:  
#doc_host = https://pages.github.%(company_name)s.com.  


doc_baseurl = /%(lib_name)s/
# For Enterprise Github pages docs use:
# doc_baseurl = /%(repo_name)s/%(lib_name)s/

git_url = https://github.com/%(user)s/%(lib_name)s/tree/%(branch)s/
# For Enterprise Github use:
#git_url = https://github.%(company_name)s.com/%(repo_name)s/%(lib_name)s/tree/%(branch)s/



lib_path = %(lib_name)s
title = %(lib_name)s

#Optional advanced parameters
#Monospace docstings: adds <pre> tags around the doc strings, preserving newlines/indentation.
#monospace_docstrings = False
#Test flags: introduce here the test flags you want to use separated by |
#tst_flags = 
#Custom sidebar: customize sidebar.json yourself for advanced sidebars (False/True)
#custom_sidebar = 
#Cell spacing: if you want cell blocks in code separated by more than one new line
#cell_spacing = 
#Custom jekyll styles: if you want more jekyll styles than tip/important/warning, set them here
#jekyll_styles = note,warning,tip,important
"""

# Write-Overwrites 
file1 = open("settings.ini", "w")  # write mode 
file1.write(innertext) 
file1.close() </details><h4>Edit the Notebooks</h4>
<p>To start, notice how there are two <code>.ipynb</code>'s. </p>
<p>These are two notebooks used for the template.</p>
<ol>
<li>
<p><code>index.ipynb</code> - When index.ipynb gets converted to 'index.html' it becomes the documentations homepage since browsers understand 'index.html' to be a website's homepage. When published, this notebook will also be made into the README.md document that can be shown on GitHub repositories pages and PyPI. Once published to PyPI, the index notebook (i.e. the homepage) can be used to show others how to install and use the library!</p>
</li>
<li>
<p><code>00_core.ipynb</code> - This is the 'core' component of the python library. You don't have to keep the 'core' part. The left two digits in the filename help the website navigation so you can increment your notebooks by the order you want them displayed. The index.ipynb is the only notebook that does not have this logic apply to it. Inside the notebook, you will see a template near ready for deployment. If the lib_name was to be replaced and a function was declared with an <code># export flag</code> at the top of its cell; this would be ready for deployment and publishing to PyPI!</p>
</li>
</ol>
! mkdir ./notebooks
! mv ./00_core.ipynb ./notebooks/
! mv index.ipynb ./notebooks/#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<h4>Create the library and documentation.</h4>
<p>Install libraries used in your exported module here, or else the next spet will not work.</p>
<p>For now, since we are working with the start template, this should not be a problem.</p>
<p>Once ready, run <code>! nbdev_build_lib</code></p>
<ul>
<li>You will now find that you have a new directory, with the name of whatever you set lib_name to.</li>
</ul>
#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
! nbdev_build_lib --fname RBIntel.ipynb#hide
!lsCONTRIBUTING.md     docs	 LICENSE      RBIntel.ipynb  settings.ini
docker-compose.yml  index.ipynb  MANIFEST.in  README.md      setup.py
<p><strong>Congratulations</strong>! You have now successfully created a Python library. </p>
<p>The library itself is still empty. In order to export code, be sure to use the <code>#export</code> Flag on cells.</p>
<p>Be sure to explore the Flags and Commands!</p>
#hide
cd ../dataguide#hide
!ls<h4>Configuring Git-Github</h4>
! git init<p>In order to <a href="https://docs.github.com/en/github/importing-your-projects-to-github/adding-an-existing-project-to-github-using-the-command-line">add an existing project</a> to GitHub: </p>
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository</a> with the repositories name the same as the new library.</li>
<li>Ensure the repository is absolutely empty so we can make a clean push.</li>
</ul>
<p>One you do create the GitHub repository through the website, you can connect the your Git repository to the GitHub repository using this command:</p>
# Make replacements whereever needed and run this! Be sure to remove our password once this is run.

# ! git remote add ORIGIN https://<USER NAME>:<passwrd>@github.com/<USER NAME>/<REPO NAME>.git<p>You will now be able to commit this local repository to GitHub.</p>
<h4>Create a PyPI account</h4>
<p>In order for you to be able to publish to <a href="https://pypi.org/">PyPI</a>, you must have an account. Click &quot;register&quot; on the top right corner of their website to build an account.</p>
<p>Your username should be the <code>user</code> value from your settings.ini file.</p>
<h4>Publishing!</h4>
<p>Refer to the Build Proccess, PyPI, and Git sections below.</p>
<h2>Pipeline 1/3: NBDEV</h2>
<p>(Run once Modules, Docs, and the README are created using NBDEV and are ready to be published onto the web.)</p>
<p>You need to install the libraries in this nb so that they are used in your other nb.</p>
# 1_ACS EXPLORE AND DOWNLOAD
!pip install -U -q ipywidgets
!pip install geopandas
!jupyter nbextension enable --py widgetsnbextension# 02_Merge_Data.ipynb
!pip install geopandas
!pip install dataplay
!pip install dexplot<p>Enter the project if it exists. Otherwise, go to the folder you want it to exist at.</p>
cd ..//content/drive/MyDrive/Sites
#hide
!ls#hide
%cd dataplay/content/drive/MyDrive/Sites/dataplay
#hide
%cd dataguide#hide
%cd notebooks#hide
%cd ../<p>As long as you are wherever you are developing the library in your folder, both of these commands will work:</p>
# first. builds the .py files from from .ipynbs
!nbdev_build_lib# second. Push .pu changes back to their original .ipynbs
!nbdev_update_lib # nbdev_build_docs builds the documentation from the notebooks
!nbdev_build_docs --force_all True --mk_readme True # sometimes. Update .ipynb import statements if the .py filename.classname changes. 
# !relimport2name# this will reload imported modules whenever the .py file changes. 
# whenever the .py file changes via nbdev_build_lib or _update_lib. 
# %load_ext autoreload
# %autoreload 2#hide
%cd notebooks! nbdev_clean_nbs
! nbdev_fix_merge 00_github.ipynb
! nbdev_fix_merge 01_colabs.ipynb
! nbdev_fix_merge 01_5_Explore_and_Download.ipynb
! nbdev_fix_merge 02_scooterExploration.ipynb
! nbdev_fix_merge 03_nbdev.ipynb
! nbdev_fix_merge index.ipynb
! nbdev_clean_nbs
! find . -name "*.bak" -type f -delete# nbdev_nb2md(fname:"A notebook file name to convert", dest:"The destination folder"='.', img_path:"Folder to export images to"='', jekyll:"To use jekyll metadata for your markdown file or not"=False)
! nbdev_nb2md 00_github.ipynb --dest "../markdown" 
! nbdev_nb2md 01_colabs.ipynb --dest "../markdown" 
! nbdev_nb2md 02_scooterExploration.ipynb --dest "../markdown" 
! nbdev_nb2md 03_nbdev.ipynb --dest "../markdown" 
! nbdev_nb2md index.ipynb --dest "../markdown" 
! find . -type d -name "*files" -exec rm -rf {} \;#hide
%cd ../#hide
!lsbuild		 dataplay.egg-info  LICENSE	 notebooks  settings.ini
CONTRIBUTING.md  dist		    Makefile	 py2html    setup.py
dataplay	 docs		    MANIFEST.in  README.md
<h2>Pipeline 2/3: GIT</h2>
<p>Before you push, run <code>nbdev_clean_nbs</code> to ensure that the push will work. Of course, <strong>that</strong> is ensured by <code>nbdev_fix_merge</code>.</p>
#hide
# This code was meant to do what the code above it is doing it. Kept for posterity.
# fix_conflicts('notebooks/index.ipynb') # This is ran as a method within nbdev_fix_merge
# from nbdev.export import *
# from nbdev.merge import *
# tst_nb = read_nb('notebooks/index.ipynb')
# print(tst_nb)<p>Run once the Modules, Docs and README have been created using NBDEV but not published.</p>
# cd datalab! git add *ls!git config --global user.name "bnia"!git config --global user.email "charles.karpati@gmail.com"! git commit -m "Collapse Experiments P2"# git push -f origin master! git push -u ORIGIN main<p>If you get the following error &quot;fatal: could not read Username for 'https://github.com': No such device or address&quot;, you will need to re-establish your Git-GitHub connection.</p>
<p>Start by running <code>! git remote rm ORIGIN</code>, then re-add like so <code>! git remote add ORIGIN https://&lt;USER NAME&gt;:&lt;passwrd&gt;@github.com/&lt;USER NAME&gt;/&lt;REPO NAME&gt;.git</code>.</p>
<p>Be sure to make the replacements whereever needed and run this. Once this is running, be sure to remove the password.</p>
<p>If GitHub pages does not show, consult this <a href="https://docs.github.com/en/github/working-with-github-pages/troubleshooting-jekyll-build-errors-for-github-pages-sites#troubleshooting-build-errors">guide</a>. Typically, this is a problem with the Markdown.</p>
<h2>Pipeline 3/3: PyPI</h2>
<p>Run once the Modules, Docs and README have been created using NBDEV.</p>
<p>Be sure you have a PyPI account that has the same username as your GitHub account before continuing.</p>
<p>You could save your credentials into a .pypirc file, but this is not recommended.</p>
# ! echo "[pypi]" > .pypirc
# ! echo "username = 'username'" >> .pypirc
# ! echo "password = 'password'" >> .pypirc<p>To publish to Pypi, install twine.</p>
! pip install twine<p>Be sure to run this final nbdev command <code>! nbdev_bump_version</code> prior to publishing. Otherwise, you might have issues.</p>
!nbdev_bump_versionOld version: 0.0.20
New version: 0.0.21
<p>Other than what has been discussed above, Nbdev has everything else all set up! Simply run make PyPI and enter your credentials when prompted at the bottom of the terminal output. Your password will be censored. Therefore, it is safe to post this code online without clearing it.</p>
! make pypils<h2>Misc Tests</h2>
<p>These things don't work... yet?</p>
<p><img src="./images/ai_of_me.jpg" alt="" /></p>
from IPython.display import display#hide
var = "hide"
display(var)var = "hide_output"
print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')var = "collapse_output"
display(var)#collapse_show
var = "collapse_show"
display(var)#collapse_hide
var = "collapse_hide"
display(var)#collapse-hide 
print('The input of this cell is visible as usual.\While the OUTPUT of this cell is collapsed by default, you can expand it!')<details > <summary>Click to toggle</summary> var = "collapse_input"
display(var)</details><details > <summary>Click to toggle</summary> #collapse_input open
var = "collapse_input open"
display(var)</details>var = "collapse_output"
display(var)#collapse_output open
var = "collapse_output open"
display(var)print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')<details>
  <summary> summary and details together </summary>
  details 1
</details><details>
  <summary> summary and details split </summary><p>summary and details split</p>
</details><details><h4><summary> Entirely Split </summary></h4>
<p>Entirely Split</p>
</details><details>
  <summary> # md within html </summary>
  **md within html**
</details>print('The input of this cell is visible as usual.\nWhile the OUTPUT of this cell is collapsed by default, you can expand it!')